# 專案重構規則

本文件提供 Singular Blockly VSCode 擴充功能的重構指南，以確保程式碼品質和維護性。

## 重構原則

重構應遵循「基本資訊」文件中的開發原則，特別是以下撰寫風格要點：

1. **簡化複雜度**
   - 識別並簡化過於複雜的程式碼片段
   - 移除冗餘或重複的程式碼
   - 拆分過長的函式為更小、更專注的函式

2. **提高模組化**
   - 將相關功能組織到獨立模組中
   - 明確定義模組間的介面
   - 減少模組間的相依性

3. **加強可測試性**
   - 將業務邏輯與 UI 邏輯分離
   - 設計便於單元測試的函式
   - 避免使用全域變數和狀態

4. **優化資源使用**
   - 檢查並減少記憶體洩漏
   - 最佳化重複執行的操作
   - 延遲載入不立即需要的資源

## 重構優先順序

重構時請優先考慮以下項目：

1. 修正已知的錯誤和穩定性問題
2. 提高核心功能的可讀性和可維護性
3. 優化使用者體驗中的關鍵路徑
4. 提升擴充性以支援未來功能

## 重構前評估清單

在進行任何重構前，請確保：

- [ ] 已充分理解相關程式碼的功能和目的
- [ ] 已閱讀 `src/extension.ts`、`media/js/blocklyEdit.js` 和 `media/html/blocklyEdit.html`
- [ ] 重構不會破壞現有功能
- [ ] 變更符合「避免過度開發」的原則
- [ ] 保持足夠的彈性以適應未來需求

## 提交規範

重構提交時：

1. 清晰描述重構的目的和影響範圍
2. 將大型重構拆分為小步驟提交
3. 確保每次提交後程式碼仍可正常運行
4. 提供必要的測試證明重構未破壞功能

## 注意事項

- 保持對 Blockly 核心庫的兼容性
- 確保多語言支援不受重構影響
- 維護與 Arduino 相關功能的完整性
- 遵循 VSCode 擴充功能的最佳實踐
